<!DOCTYPE html>
<html>
<head>
<script src="processing.js"></script>
<style>
#myCanvas1 {
	position: absolute;
	left: 144px;
}
#myCanvas2 {
	position: absolute;
	left: 453px;
}
#myCanvas3 {
	position: absolute;
	right: 113px;
}
body {
    background-image: url('https://cloud.githubusercontent.com/assets/7793763/4875437/de953c0c-6296-11e4-935e-4b206cf516de.jpg'); 
    background-size: cover;
}
/*media queries*/
@media screen and (max-device-height: 1280px) {
	#myCanvas1, #myCanvas2, #myCanvas3 {
		position: absolute;
	}
	#myCanvas1 {
		left: 120px;
	}
	#myCanvas2 {
		left: 429px;
	}
	#myCanvas3 {
		left: 79px;
	}
}
</style>
</head>
<body>
<div><p><center style="color: #fff;">PRESS THE BUTTON AND PUT YOUR THOUGHTS IN RESPECTIVE BOX.</center><p><div>
<image src="https://cloud.githubusercontent.com/assets/7793763/4875427/6ddfec82-6296-11e4-80e6-40e8e6370d00.png" id="img" onclick="newBall(0)"></image>
<image src="https://cloud.githubusercontent.com/assets/7793763/4875429/8a57e5fe-6296-11e4-8b65-fb202874b160.png" style="margin: 32px; position: absolute; left: 579px;" onclick="newBall(0)"></image>
<image src="https://cloud.githubusercontent.com/assets/7793763/4875433/a868cc34-6296-11e4-9029-116b32bed7a6.png" style="margin: 32px; position: absolute; right: 232px; margin: 55px;" onclick="newBall(0)"></image>
<image src="https://cloud.githubusercontent.com/assets/7793763/4875384/2096b984-6295-11e4-8407-e310916fd6ed.png" style="margin: 259px; left: 75px; position: absolute;"></image>
<image src="https://cloud.githubusercontent.com/assets/7793763/4875414/f48c4ef2-6295-11e4-991e-c49f708933be.png" style="margin: 258px; position: absolute; left: 377px;"></image>
<image src="https://cloud.githubusercontent.com/assets/7793763/4875423/44144c68-6296-11e4-974f-9ae28d10cb71.png" style="margin: 258px; position: absolute; right: 44px;"></image>
<br style="clear: both" />
<canvas id="myCanvas1" width="134px" height="331px" onclick="newBall(0);"></canvas>
<canvas id="myCanvas2" width="134px" height="331px" onclick="newBall(1);"></canvas>
<canvas id="myCanvas3" width="134px" height="331px" onclick="newBall(2);"></canvas>
<script type="text/javascript">
	var balls = [[], [], []],
    canvases = document.getElementsByTagName('canvas'),
    context = [],
    interval,
    boxWidth = 150,
    ballRadius = 10,
    canvasHeight = 235;
for (var i = 0; i < canvases.length; i++) {
    context.push(canvases[i].getContext('2d'));
}

function draw() {
    var movement = false;
    for (var i = 0; i < 3; i++) {
        context[i].clearRect(0, 0, boxWidth, canvasHeight);
        for (var j = 0; j < balls[i].length; j++) {
            if (balls[i][j].y < balls[i][j].yStop) {
                balls[i][j].y += 4;
                movement = true;
            }
            context[i].beginPath();
            context[i].fillStyle = "red";
            context[i].arc(balls[i][j].x, balls[i][j].y, ballRadius, 0, Math.PI * 2, true);
            context[i].closePath();
            context[i].fill();
        }
    }
    if (!movement) {
        clearInterval(interval);
        interval = null;
    }
}

function newBall(n) {
    console.log('new ball', n);
    var last = balls[n][balls[n].length - 1],
        ball = {x: ballRadius, y: ballRadius, yStop: canvasHeight - ballRadius};
    if (last) {
        if (last.x < boxWidth - ballRadius * 4) {
             ball.x = last.x + ballRadius * 2;
             ball.yStop = last.yStop;
        } else {
             ball.yStop = last.yStop - ballRadius * 2;
        }
    }
    balls[n].push(ball);
    if (!interval) {
        interval = setInterval(draw, 10);
    }
}

</script>
</body>
</html>
